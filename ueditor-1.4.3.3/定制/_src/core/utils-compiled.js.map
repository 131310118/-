{"version":3,"sources":["utils.js"],"names":[],"mappings":"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","file":"utils-compiled.js","sourcesContent":["/**\n * 工具函数包\n * @file\n * @module UE.utils\n * @since 1.2.6.1\n */\n\n/**\n * UEditor封装使用的静态工具函数\n * @module UE.utils\n * @unfile\n */\n\nvar utils = UE.utils = {\n\n    /**\n     * 用给定的迭代器遍历对象\n     * @method each\n     * @param { Object } obj 需要遍历的对象\n     * @param { Function } iterator 迭代器， 该方法接受两个参数， 第一个参数是当前所处理的value， 第二个参数是当前遍历对象的key\n     * @example\n     * ```javascript\n     * var demoObj = {\n     *     key1: 1,\n     *     key2: 2\n     * };\n     *\n     * //output: key1: 1, key2: 2\n     * UE.utils.each( demoObj, funciton ( value, key ) {\n     *\n     *     console.log( key + \":\" + value );\n     *\n     * } );\n     * ```\n     */\n\n    /**\n     * 用给定的迭代器遍历数组或类数组对象\n     * @method each\n     * @param { Array } array 需要遍历的数组或者类数组\n     * @param { Function } iterator 迭代器， 该方法接受两个参数， 第一个参数是当前所处理的value， 第二个参数是当前遍历对象的key\n     * @example\n     * ```javascript\n     * var divs = document.getElmentByTagNames( \"div\" );\n     *\n     * //output: 0: DIV, 1: DIV ...\n     * UE.utils.each( divs, funciton ( value, key ) {\n     *\n     *     console.log( key + \":\" + value.tagName );\n     *\n     * } );\n     * ```\n     */\n    each : function(obj, iterator, context) {\n        if (obj == null) return;\n        if (obj.length === +obj.length) {\n            for (var i = 0, l = obj.length; i < l; i++) {\n                if(iterator.call(context, obj[i], i, obj) === false)\n                    return false;\n            }\n        } else {\n            for (var key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    if(iterator.call(context, obj[key], key, obj) === false)\n                        return false;\n                }\n            }\n        }\n    },\n\n    /**\n     * 以给定对象作为原型创建一个新对象\n     * @method makeInstance\n     * @param { Object } protoObject 该对象将作为新创建对象的原型\n     * @return { Object } 新的对象， 该对象的原型是给定的protoObject对象\n     * @example\n     * ```javascript\n     *\n     * var protoObject = { sayHello: function () { console.log('Hello UEditor!'); } };\n     *\n     * var newObject = UE.utils.makeInstance( protoObject );\n     * //output: Hello UEditor!\n     * newObject.sayHello();\n     * ```\n     */\n    makeInstance:function (obj) {\n        var noop = new Function();\n        noop.prototype = obj;\n        obj = new noop;\n        noop.prototype = null;\n        return obj;\n    },\n\n    /**\n     * 将source对象中的属性扩展到target对象上\n     * @method extend\n     * @remind 该方法将强制把source对象上的属性复制到target对象上\n     * @see UE.utils.extend(Object,Object,Boolean)\n     * @param { Object } target 目标对象， 新的属性将附加到该对象上\n     * @param { Object } source 源对象， 该对象的属性会被附加到target对象上\n     * @return { Object } 返回target对象\n     * @example\n     * ```javascript\n     *\n     * var target = { name: 'target', sex: 1 },\n     *      source = { name: 'source', age: 17 };\n     *\n     * UE.utils.extend( target, source );\n     *\n     * //output: { name: 'source', sex: 1, age: 17 }\n     * console.log( target );\n     *\n     * ```\n     */\n\n    /**\n     * 将source对象中的属性扩展到target对象上， 根据指定的isKeepTarget值决定是否保留目标对象中与\n     * 源对象属性名相同的属性值。\n     * @method extend\n     * @param { Object } target 目标对象， 新的属性将附加到该对象上\n     * @param { Object } source 源对象， 该对象的属性会被附加到target对象上\n     * @param { Boolean } isKeepTarget 是否保留目标对象中与源对象中属性名相同的属性\n     * @return { Object } 返回target对象\n     * @example\n     * ```javascript\n     *\n     * var target = { name: 'target', sex: 1 },\n     *      source = { name: 'source', age: 17 };\n     *\n     * UE.utils.extend( target, source, true );\n     *\n     * //output: { name: 'target', sex: 1, age: 17 }\n     * console.log( target );\n     *\n     * ```\n     */\n    extend:function (t, s, b) {\n        if (s) {\n            for (var k in s) {\n                if (!b || !t.hasOwnProperty(k)) {\n                    t[k] = s[k];\n                }\n            }\n        }\n        return t;\n    },\n\n    /**\n     * 将给定的多个对象的属性复制到目标对象target上\n     * @method extend2\n     * @remind 该方法将强制把源对象上的属性复制到target对象上\n     * @remind 该方法支持两个及以上的参数， 从第二个参数开始， 其属性都会被复制到第一个参数上。 如果遇到同名的属性，\n     *          将会覆盖掉之前的值。\n     * @param { Object } target 目标对象， 新的属性将附加到该对象上\n     * @param { Object... } source 源对象， 支持多个对象， 该对象的属性会被附加到target对象上\n     * @return { Object } 返回target对象\n     * @example\n     * ```javascript\n     *\n     * var target = {},\n     *     source1 = { name: 'source', age: 17 },\n     *     source2 = { title: 'dev' };\n     *\n     * UE.utils.extend2( target, source1, source2 );\n     *\n     * //output: { name: 'source', age: 17, title: 'dev' }\n     * console.log( target );\n     *\n     * ```\n     */\n    extend2:function (t) {\n        var a = arguments;\n        for (var i = 1; i < a.length; i++) {\n            var x = a[i];\n            for (var k in x) {\n                if (!t.hasOwnProperty(k)) {\n                    t[k] = x[k];\n                }\n            }\n        }\n        return t;\n    },\n\n    /**\n     * 模拟继承机制， 使得subClass继承自superClass\n     * @method inherits\n     * @param { Object } subClass 子类对象\n     * @param { Object } superClass 超类对象\n     * @warning 该方法只能让subClass继承超类的原型， subClass对象自身的属性和方法不会被继承\n     * @return { Object } 继承superClass后的子类对象\n     * @example\n     * ```javascript\n     * function SuperClass(){\n     *     this.name = \"小李\";\n     * }\n     *\n     * SuperClass.prototype = {\n     *     hello:function(str){\n     *         console.log(this.name + str);\n     *     }\n     * }\n     *\n     * function SubClass(){\n     *     this.name = \"小张\";\n     * }\n     *\n     * UE.utils.inherits(SubClass,SuperClass);\n     *\n     * var sub = new SubClass();\n     * //output: '小张早上好!\n     * sub.hello(\"早上好!\");\n     * ```\n     */\n    inherits:function (subClass, superClass) {\n        var oldP = subClass.prototype,\n            newP = utils.makeInstance(superClass.prototype);\n        utils.extend(newP, oldP, true);\n        subClass.prototype = newP;\n        return (newP.constructor = subClass);\n    },\n\n    /**\n     * 用指定的context对象作为函数fn的上下文\n     * @method bind\n     * @param { Function } fn 需要绑定上下文的函数对象\n     * @param { Object } content 函数fn新的上下文对象\n     * @return { Function } 一个新的函数， 该函数作为原始函数fn的代理， 将完成fn的上下文调换工作。\n     * @example\n     * ```javascript\n     *\n     * var name = 'window',\n     *     newTest = null;\n     *\n     * function test () {\n     *     console.log( this.name );\n     * }\n     *\n     * newTest = UE.utils.bind( test, { name: 'object' } );\n     *\n     * //output: object\n     * newTest();\n     *\n     * //output: window\n     * test();\n     *\n     * ```\n     */\n    bind:function (fn, context) {\n        return function () {\n            return fn.apply(context, arguments);\n        };\n    },\n\n    /**\n     * 创建延迟指定时间后执行的函数fn\n     * @method defer\n     * @param { Function } fn 需要延迟执行的函数对象\n     * @param { int } delay 延迟的时间， 单位是毫秒\n     * @warning 该方法的时间控制是不精确的，仅仅只能保证函数的执行是在给定的时间之后，\n     *           而不能保证刚好到达延迟时间时执行。\n     * @return { Function } 目标函数fn的代理函数， 只有执行该函数才能起到延时效果\n     * @example\n     * ```javascript\n     * var start = 0;\n     *\n     * function test(){\n     *     console.log( new Date() - start );\n     * }\n     *\n     * var testDefer = UE.utils.defer( test, 1000 );\n     * //\n     * start = new Date();\n     * //output: (大约在1000毫秒之后输出) 1000\n     * testDefer();\n     * ```\n     */\n\n    /**\n     * 创建延迟指定时间后执行的函数fn, 如果在延迟时间内再次执行该方法， 将会根据指定的exclusion的值，\n     * 决定是否取消前一次函数的执行， 如果exclusion的值为true， 则取消执行，反之，将继续执行前一个方法。\n     * @method defer\n     * @param { Function } fn 需要延迟执行的函数对象\n     * @param { int } delay 延迟的时间， 单位是毫秒\n     * @param { Boolean } exclusion 如果在延迟时间内再次执行该函数，该值将决定是否取消执行前一次函数的执行，\n     *                     值为true表示取消执行， 反之则将在执行前一次函数之后才执行本次函数调用。\n     * @warning 该方法的时间控制是不精确的，仅仅只能保证函数的执行是在给定的时间之后，\n     *           而不能保证刚好到达延迟时间时执行。\n     * @return { Function } 目标函数fn的代理函数， 只有执行该函数才能起到延时效果\n     * @example\n     * ```javascript\n     *\n     * function test(){\n     *     console.log(1);\n     * }\n     *\n     * var testDefer = UE.utils.defer( test, 1000, true );\n     *\n     * //output: (两次调用仅有一次输出) 1\n     * testDefer();\n     * testDefer();\n     * ```\n     */\n    defer:function (fn, delay, exclusion) {\n        var timerID;\n        return function () {\n            if (exclusion) {\n                clearTimeout(timerID);\n            }\n            timerID = setTimeout(fn, delay);\n        };\n    },\n\n    /**\n     * 获取元素item在数组array中首次出现的位置, 如果未找到item， 则返回-1\n     * @method indexOf\n     * @remind 该方法的匹配过程使用的是恒等“===”\n     * @param { Array } array 需要查找的数组对象\n     * @param { * } item 需要在目标数组中查找的值\n     * @return { int } 返回item在目标数组array中首次出现的位置， 如果在数组中未找到item， 则返回-1\n     * @example\n     * ```javascript\n     * var item = 1,\n     *     arr = [ 3, 4, 6, 8, 1, 1, 2 ];\n     *\n     * //output: 4\n     * console.log( UE.utils.indexOf( arr, item ) );\n     * ```\n     */\n\n    /**\n     * 获取元素item数组array中首次出现的位置, 如果未找到item， 则返回-1。通过start的值可以指定搜索的起始位置。\n     * @method indexOf\n     * @remind 该方法的匹配过程使用的是恒等“===”\n     * @param { Array } array 需要查找的数组对象\n     * @param { * } item 需要在目标数组中查找的值\n     * @param { int } start 搜索的起始位置\n     * @return { int } 返回item在目标数组array中的start位置之后首次出现的位置， 如果在数组中未找到item， 则返回-1\n     * @example\n     * ```javascript\n     * var item = 1,\n     *     arr = [ 3, 4, 6, 8, 1, 2, 8, 3, 2, 1, 1, 4 ];\n     *\n     * //output: 9\n     * console.log( UE.utils.indexOf( arr, item, 5 ) );\n     * ```\n     */\n    indexOf:function (array, item, start) {\n        var index = -1;\n        start = this.isNumber(start) ? start : 0;\n        this.each(array, function (v, i) {\n            if (i >= start && v === item) {\n                index = i;\n                return false;\n            }\n        });\n        return index;\n    },\n\n    /**\n     * 移除数组array中所有的元素item\n     * @method removeItem\n     * @param { Array } array 要移除元素的目标数组\n     * @param { * } item 将要被移除的元素\n     * @remind 该方法的匹配过程使用的是恒等“===”\n     * @example\n     * ```javascript\n     * var arr = [ 4, 5, 7, 1, 3, 4, 6 ];\n     *\n     * UE.utils.removeItem( arr, 4 );\n     * //output: [ 5, 7, 1, 3, 6 ]\n     * console.log( arr );\n     *\n     * ```\n     */\n    removeItem:function (array, item) {\n        for (var i = 0, l = array.length; i < l; i++) {\n            if (array[i] === item) {\n                array.splice(i, 1);\n                i--;\n            }\n        }\n    },\n\n    /**\n     * 删除字符串str的首尾空格\n     * @method trim\n     * @param { String } str 需要删除首尾空格的字符串\n     * @return { String } 删除了首尾的空格后的字符串\n     * @example\n     * ```javascript\n     *\n     * var str = \" UEdtior \";\n     *\n     * //output: 9\n     * console.log( str.length );\n     *\n     * //output: 7\n     * console.log( UE.utils.trim( \" UEdtior \" ).length );\n     *\n     * //output: 9\n     * console.log( str.length );\n     *\n     *  ```\n     */\n    trim:function (str) {\n        return str.replace(/(^[ \\t\\n\\r]+)|([ \\t\\n\\r]+$)/g, '');\n    },\n\n    /**\n     * 将字符串str以','分隔成数组后，将该数组转换成哈希对象， 其生成的hash对象的key为数组中的元素， value为1\n     * @method listToMap\n     * @warning 该方法在生成的hash对象中，会为每一个key同时生成一个另一个全大写的key。\n     * @param { String } str 该字符串将被以','分割为数组， 然后进行转化\n     * @return { Object } 转化之后的hash对象\n     * @example\n     * ```javascript\n     *\n     * //output: Object {UEdtior: 1, UEDTIOR: 1, Hello: 1, HELLO: 1}\n     * console.log( UE.utils.listToMap( 'UEdtior,Hello' ) );\n     *\n     * ```\n     */\n\n    /**\n     * 将字符串数组转换成哈希对象， 其生成的hash对象的key为数组中的元素， value为1\n     * @method listToMap\n     * @warning 该方法在生成的hash对象中，会为每一个key同时生成一个另一个全大写的key。\n     * @param { Array } arr 字符串数组\n     * @return { Object } 转化之后的hash对象\n     * @example\n     * ```javascript\n     *\n     * //output: Object {UEdtior: 1, UEDTIOR: 1, Hello: 1, HELLO: 1}\n     * console.log( UE.utils.listToMap( [ 'UEdtior', 'Hello' ] ) );\n     *\n     * ```\n     */\n    listToMap:function (list) {\n        if (!list)return {};\n        list = utils.isArray(list) ? list : list.split(',');\n        for (var i = 0, ci, obj = {}; ci = list[i++];) {\n            obj[ci.toUpperCase()] = obj[ci] = 1;\n        }\n        return obj;\n    },\n\n    /**\n     * 将str中的html符号转义,将转义“'，&，<，\"，>”五个字符\n     * @method unhtml\n     * @param { String } str 需要转义的字符串\n     * @return { String } 转义后的字符串\n     * @example\n     * ```javascript\n     * var html = '<body>&</body>';\n     *\n     * //output: &lt;body&gt;&amp;&lt;/body&gt;\n     * console.log( UE.utils.unhtml( html ) );\n     *\n     * ```\n     */\n    unhtml:function (str, reg) {\n        return str ? str.replace(reg || /[&<\">'](?:(amp|lt|quot|gt|#39|nbsp|#\\d+);)?/g, function (a, b) {\n            if (b) {\n                return a;\n            } else {\n                return {\n                    '<':'&lt;',\n                    '&':'&amp;',\n                    '\"':'&quot;',\n                    '>':'&gt;',\n                    \"'\":'&#39;'\n                }[a]\n            }\n\n        }) : '';\n    },\n    /**\n     * 将url中的html字符转义， 仅转义  ', \", <, > 四个字符\n     * @param  { String } str 需要转义的字符串\n     * @param  { RegExp } reg 自定义的正则\n     * @return { String }     转义后的字符串\n     */\n    unhtmlForUrl:function (str, reg) {\n        return str ? str.replace(reg || /[<\">']/g, function (a) {\n            return {\n                '<':'&lt;',\n                '&':'&amp;',\n                '\"':'&quot;',\n                '>':'&gt;',\n                \"'\":'&#39;'\n            }[a]\n\n        }) : '';\n    },\n\n    /**\n     * 将str中的转义字符还原成html字符\n     * @see UE.utils.unhtml(String);\n     * @method html\n     * @param { String } str 需要逆转义的字符串\n     * @return { String } 逆转义后的字符串\n     * @example\n     * ```javascript\n     *\n     * var str = '&lt;body&gt;&amp;&lt;/body&gt;';\n     *\n     * //output: <body>&</body>\n     * console.log( UE.utils.html( str ) );\n     *\n     * ```\n     */\n    html:function (str) {\n        return str ? str.replace(/&((g|l|quo)t|amp|#39|nbsp);/g, function (m) {\n            return {\n                '&lt;':'<',\n                '&amp;':'&',\n                '&quot;':'\"',\n                '&gt;':'>',\n                '&#39;':\"'\",\n                '&nbsp;':' '\n            }[m]\n        }) : '';\n    },\n\n    /**\n     * 将css样式转换为驼峰的形式\n     * @method cssStyleToDomStyle\n     * @param { String } cssName 需要转换的css样式名\n     * @return { String } 转换成驼峰形式后的css样式名\n     * @example\n     * ```javascript\n     *\n     * var str = 'border-top';\n     *\n     * //output: borderTop\n     * console.log( UE.utils.cssStyleToDomStyle( str ) );\n     *\n     * ```\n     */\n    cssStyleToDomStyle:function () {\n        var test = document.createElement('div').style,\n            cache = {\n                'float':test.cssFloat != undefined ? 'cssFloat' : test.styleFloat != undefined ? 'styleFloat' : 'float'\n            };\n\n        return function (cssName) {\n            return cache[cssName] || (cache[cssName] = cssName.toLowerCase().replace(/-./g, function (match) {\n                return match.charAt(1).toUpperCase();\n            }));\n        };\n    }(),\n\n    /**\n     * 动态加载文件到doc中\n     * @method loadFile\n     * @param { DomDocument } document 需要加载资源文件的文档对象\n     * @param { Object } options 加载资源文件的属性集合， 取值请参考代码示例\n     * @example\n     * ```javascript\n     *\n     * UE.utils.loadFile( document, {\n     *     src:\"let_const.js\",\n     *     tag:\"script\",\n     *     type:\"text/javascript\",\n     *     defer:\"defer\"\n     * } );\n     *\n     * ```\n     */\n\n    /**\n     * 动态加载文件到doc中，加载成功后执行的回调函数fn\n     * @method loadFile\n     * @param { DomDocument } document 需要加载资源文件的文档对象\n     * @param { Object } options 加载资源文件的属性集合， 该集合支持的值是script标签和style标签支持的所有属性。\n     * @param { Function } fn 资源文件加载成功之后执行的回调\n     * @warning 对于在同一个文档中多次加载同一URL的文件， 该方法会在第一次加载之后缓存该请求，\n     *           在此之后的所有同一URL的请求， 将会直接触发回调。\n     * @example\n     * ```javascript\n     *\n     * UE.utils.loadFile( document, {\n     *     src:\"let_const.js\",\n     *     tag:\"script\",\n     *     type:\"text/javascript\",\n     *     defer:\"defer\"\n     * }, function () {\n     *     console.log('加载成功');\n     * } );\n     *\n     * ```\n     */\n    loadFile:function () {\n        var tmpList = [];\n\n        function getItem(doc, obj) {\n            try {\n                for (var i = 0, ci; ci = tmpList[i++];) {\n                    if (ci.doc === doc && ci.url == (obj.src || obj.href)) {\n                        return ci;\n                    }\n                }\n            } catch (e) {\n                return null;\n            }\n\n        }\n\n        return function (doc, obj, fn) {\n            var item = getItem(doc, obj);\n            if (item) {\n                if (item.ready) {\n                    fn && fn();\n                } else {\n                    item.funs.push(fn)\n                }\n                return;\n            }\n            tmpList.push({\n                doc:doc,\n                url:obj.src || obj.href,\n                funs:[fn]\n            });\n            if (!doc.body) {\n                var html = [];\n                for (var p in obj) {\n                    if (p == 'tag')continue;\n                    html.push(p + '=\"' + obj[p] + '\"')\n                }\n                doc.write('<' + obj.tag + ' ' + html.join(' ') + ' ></' + obj.tag + '>');\n                return;\n            }\n            if (obj.id && doc.getElementById(obj.id)) {\n                return;\n            }\n            var element = doc.createElement(obj.tag);\n            delete obj.tag;\n            for (var p in obj) {\n                element.setAttribute(p, obj[p]);\n            }\n            element.onload = element.onreadystatechange = function () {\n                if (!this.readyState || /loaded|complete/.test(this.readyState)) {\n                    item = getItem(doc, obj);\n                    if (item.funs.length > 0) {\n                        item.ready = 1;\n                        for (var fi; fi = item.funs.pop();) {\n                            fi();\n                        }\n                    }\n                    element.onload = element.onreadystatechange = null;\n                }\n            };\n            element.onerror = function () {\n                throw Error('The load ' + (obj.href || obj.src) + ' fails,check the url settings of file ueditor.config.js ')\n            };\n            doc.getElementsByTagName(\"head\")[0].appendChild(element);\n        }\n    }(),\n\n    /**\n     * 判断obj对象是否为空\n     * @method isEmptyObject\n     * @param { * } obj 需要判断的对象\n     * @remind 如果判断的对象是NULL， 将直接返回true， 如果是数组且为空， 返回true， 如果是字符串， 且字符串为空，\n     *          返回true， 如果是普通对象， 且该对象没有任何实例属性， 返回true\n     * @return { Boolean } 对象是否为空\n     * @example\n     * ```javascript\n     *\n     * //output: true\n     * console.log( UE.utils.isEmptyObject( {} ) );\n     *\n     * //output: true\n     * console.log( UE.utils.isEmptyObject( [] ) );\n     *\n     * //output: true\n     * console.log( UE.utils.isEmptyObject( \"\" ) );\n     *\n     * //output: false\n     * console.log( UE.utils.isEmptyObject( { key: 1 } ) );\n     *\n     * //output: false\n     * console.log( UE.utils.isEmptyObject( [1] ) );\n     *\n     * //output: false\n     * console.log( UE.utils.isEmptyObject( \"1\" ) );\n     *\n     * ```\n     */\n    isEmptyObject:function (obj) {\n        if (obj == null) return true;\n        if (this.isArray(obj) || this.isString(obj)) return obj.length === 0;\n        for (var key in obj) if (obj.hasOwnProperty(key)) return false;\n        return true;\n    },\n\n    /**\n     * 把rgb格式的颜色值转换成16进制格式\n     * @method fixColor\n     * @param { String } rgb格式的颜色值\n     * @param { String }\n     * @example\n     * rgb(255,255,255)  => \"#ffffff\"\n     */\n    fixColor:function (name, value) {\n        if (/color/i.test(name) && /rgba?/.test(value)) {\n            var array = value.split(\",\");\n            if (array.length > 3)\n                return \"\";\n            value = \"#\";\n            for (var i = 0, color; color = array[i++];) {\n                color = parseInt(color.replace(/[^\\d]/gi, ''), 10).toString(16);\n                value += color.length == 1 ? \"0\" + color : color;\n            }\n            value = value.toUpperCase();\n        }\n        return  value;\n    },\n    /**\n     * 只针对border,padding,margin做了处理，因为性能问题\n     * @public\n     * @function\n     * @param {String}    val style字符串\n     */\n    optCss:function (val) {\n        var padding, margin, border;\n        val = val.replace(/(padding|margin|border)\\-([^:]+):([^;]+);?/gi, function (str, key, name, val) {\n            if (val.split(' ').length == 1) {\n                switch (key) {\n                    case 'padding':\n                        !padding && (padding = {});\n                        padding[name] = val;\n                        return '';\n                    case 'margin':\n                        !margin && (margin = {});\n                        margin[name] = val;\n                        return '';\n                    case 'border':\n                        return val == 'initial' ? '' : str;\n                }\n            }\n            return str;\n        });\n\n        function opt(obj, name) {\n            if (!obj) {\n                return '';\n            }\n            var t = obj.top , b = obj.bottom, l = obj.left, r = obj.right, val = '';\n            if (!t || !l || !b || !r) {\n                for (var p in obj) {\n                    val += ';' + name + '-' + p + ':' + obj[p] + ';';\n                }\n            } else {\n                val += ';' + name + ':' +\n                    (t == b && b == l && l == r ? t :\n                        t == b && l == r ? (t + ' ' + l) :\n                            l == r ? (t + ' ' + l + ' ' + b) : (t + ' ' + r + ' ' + b + ' ' + l)) + ';'\n            }\n            return val;\n        }\n\n        val += opt(padding, 'padding') + opt(margin, 'margin');\n        return val.replace(/^[ \\n\\r\\t;]*|[ \\n\\r\\t]*$/, '').replace(/;([ \\n\\r\\t]+)|\\1;/g, ';')\n            .replace(/(&((l|g)t|quot|#39))?;{2,}/g, function (a, b) {\n                return b ? b + \";;\" : ';'\n            });\n    },\n\n    /**\n     * 克隆对象\n     * @method clone\n     * @param { Object } source 源对象\n     * @return { Object } source的一个副本\n     */\n\n    /**\n     * 深度克隆对象，将source的属性克隆到target对象， 会覆盖target重名的属性。\n     * @method clone\n     * @param { Object } source 源对象\n     * @param { Object } target 目标对象\n     * @return { Object } 附加了source对象所有属性的target对象\n     */\n    clone:function (source, target) {\n        var tmp;\n        target = target || {};\n        for (var i in source) {\n            if (source.hasOwnProperty(i)) {\n                tmp = source[i];\n                if (typeof tmp == 'object') {\n                    target[i] = utils.isArray(tmp) ? [] : {};\n                    utils.clone(source[i], target[i])\n                } else {\n                    target[i] = tmp;\n                }\n            }\n        }\n        return target;\n    },\n\n    /**\n     * 把cm／pt为单位的值转换为px为单位的值\n     * @method transUnitToPx\n     * @param { String } 待转换的带单位的字符串\n     * @return { String } 转换为px为计量单位的值的字符串\n     * @example\n     * ```javascript\n     *\n     * //output: 500px\n     * console.log( UE.utils.transUnitToPx( '20cm' ) );\n     *\n     * //output: 27px\n     * console.log( UE.utils.transUnitToPx( '20pt' ) );\n     *\n     * ```\n     */\n    transUnitToPx:function (val) {\n        if (!/(pt|cm)/.test(val)) {\n            return val\n        }\n        var unit;\n        val.replace(/([\\d.]+)(\\w+)/, function (str, v, u) {\n            val = v;\n            unit = u;\n        });\n        switch (unit) {\n            case 'cm':\n                val = parseFloat(val) * 25;\n                break;\n            case 'pt':\n                val = Math.round(parseFloat(val) * 96 / 72);\n        }\n        return val + (val ? 'px' : '');\n    },\n\n    /**\n     * 在dom树ready之后执行给定的回调函数\n     * @method domReady\n     * @remind 如果在执行该方法的时候， dom树已经ready， 那么回调函数将立刻执行\n     * @param { Function } fn dom树ready之后的回调函数\n     * @example\n     * ```javascript\n     *\n     * UE.utils.domReady( function () {\n     *\n     *     console.log('123');\n     *\n     * } );\n     *\n     * ```\n     */\n    domReady:function () {\n\n        var fnArr = [];\n\n        function doReady(doc) {\n            //确保onready只执行一次\n            doc.isReady = true;\n            for (var ci; ci = fnArr.pop(); ci()) {\n            }\n        }\n\n        return function (onready, win) {\n            win = win || window;\n            var doc = win.document;\n            onready && fnArr.push(onready);\n            if (doc.readyState === \"complete\") {\n                doReady(doc);\n            } else {\n                doc.isReady && doReady(doc);\n                if (browser.ie && browser.version != 11) {\n                    (function () {\n                        if (doc.isReady) return;\n                        try {\n                            doc.documentElement.doScroll(\"left\");\n                        } catch (error) {\n                            setTimeout(arguments.callee, 0);\n                            return;\n                        }\n                        doReady(doc);\n                    })();\n                    win.attachEvent('onload', function () {\n                        doReady(doc)\n                    });\n                } else {\n                    doc.addEventListener(\"DOMContentLoaded\", function () {\n                        doc.removeEventListener(\"DOMContentLoaded\", arguments.callee, false);\n                        doReady(doc);\n                    }, false);\n                    win.addEventListener('load', function () {\n                        doReady(doc)\n                    }, false);\n                }\n            }\n\n        }\n    }(),\n\n    /**\n     * 动态添加css样式\n     * @method cssRule\n     * @param { String } 节点名称\n     * @grammar UE.utils.cssRule('添加的样式的节点名称',['样式'，'放到哪个document上'])\n     * @grammar UE.utils.cssRule('body','body{background:#ccc}') => null  //给body添加背景颜色\n     * @grammar UE.utils.cssRule('body') =>样式的字符串  //取得key值为body的样式的内容,如果没有找到key值先关的样式将返回空，例如刚才那个背景颜色，将返回 body{background:#ccc}\n     * @grammar UE.utils.cssRule('body',document) => 返回指定key的样式，并且指定是哪个document\n     * @grammar UE.utils.cssRule('body','') =>null //清空给定的key值的背景颜色\n     */\n    cssRule:browser.ie && browser.version != 11 ? function (key, style, doc) {\n        var indexList, index;\n        if(style === undefined || style && style.nodeType && style.nodeType == 9){\n            //获取样式\n            doc = style && style.nodeType && style.nodeType == 9 ? style : (doc || document);\n            indexList = doc.indexList || (doc.indexList = {});\n            index = indexList[key];\n            if(index !==  undefined){\n                return doc.styleSheets[index].cssText\n            }\n            return undefined;\n        }\n        doc = doc || document;\n        indexList = doc.indexList || (doc.indexList = {});\n        index = indexList[key];\n        //清除样式\n        if(style === ''){\n            if(index!== undefined){\n                doc.styleSheets[index].cssText = '';\n                delete indexList[key];\n                return true\n            }\n            return false;\n        }\n\n        //添加样式\n        if(index!== undefined){\n            sheetStyle =  doc.styleSheets[index];\n        }else{\n            sheetStyle = doc.createStyleSheet('', index = doc.styleSheets.length);\n            indexList[key] = index;\n        }\n        sheetStyle.cssText = style;\n    }: function (key, style, doc) {\n        var head, node;\n        if(style === undefined || style && style.nodeType && style.nodeType == 9){\n            //获取样式\n            doc = style && style.nodeType && style.nodeType == 9 ? style : (doc || document);\n            node = doc.getElementById(key);\n            return node ? node.innerHTML : undefined;\n        }\n        doc = doc || document;\n        node = doc.getElementById(key);\n\n        //清除样式\n        if(style === ''){\n            if(node){\n                node.parentNode.removeChild(node);\n                return true\n            }\n            return false;\n        }\n\n        //添加样式\n        if(node){\n            node.innerHTML = style;\n        }else{\n            node = doc.createElement('style');\n            node.id = key;\n            node.innerHTML = style;\n            doc.getElementsByTagName('head')[0].appendChild(node);\n        }\n    },\n    sort:function(array,compareFn){\n        compareFn = compareFn || function(item1, item2){ return item1.localeCompare(item2);};\n        for(var i= 0,len = array.length; i<len; i++){\n            for(var j = i,length = array.length; j<length; j++){\n                if(compareFn(array[i], array[j]) > 0){\n                    var t = array[i];\n                    array[i] = array[j];\n                    array[j] = t;\n                }\n            }\n        }\n        return array;\n    },\n    serializeParam:function (json) {\n        var strArr = [];\n        for (var i in json) {\n            //忽略默认的几个参数\n            if(i==\"method\" || i==\"timeout\" || i==\"async\") continue;\n            //传递过来的对象和函数不在提交之列\n            if (!((typeof json[i]).toLowerCase() == \"function\" || (typeof json[i]).toLowerCase() == \"object\")) {\n                strArr.push( encodeURIComponent(i) + \"=\"+encodeURIComponent(json[i]) );\n            } else if (utils.isArray(json[i])) {\n                //支持传数组内容\n                for(var j = 0; j < json[i].length; j++) {\n                    strArr.push( encodeURIComponent(i) + \"[]=\"+encodeURIComponent(json[i][j]) );\n                }\n            }\n        }\n        return strArr.join(\"&\");\n    },\n    formatUrl:function (url) {\n        var u = url.replace(/&&/g, '&');\n        u = u.replace(/\\?&/g, '?');\n        u = u.replace(/&$/g, '');\n        u = u.replace(/&#/g, '#');\n        u = u.replace(/&+/g, '&');\n        return u;\n    },\n    isCrossDomainUrl:function (url) {\n        var a = document.createElement('a');\n        a.href = url;\n        if (browser.ie) {\n            a.href = a.href;\n        }\n        return !(a.protocol == location.protocol && a.hostname == location.hostname &&\n        (a.port == location.port || (a.port == '80' && location.port == '') || (a.port == '' && location.port == '80')));\n    },\n    clearEmptyAttrs : function(obj){\n        for(var p in obj){\n            if(obj[p] === ''){\n                delete obj[p]\n            }\n        }\n        return obj;\n    },\n    str2json : function(s){\n\n        if (!utils.isString(s)) return null;\n        if (window.JSON) {\n            return JSON.parse(s);\n        } else {\n            return (new Function(\"return \" + utils.trim(s || '')))();\n        }\n\n    },\n    json2str : (function(){\n\n        if (window.JSON) {\n\n            return JSON.stringify;\n\n        } else {\n\n            var escapeMap = {\n                \"\\b\": '\\\\b',\n                \"\\t\": '\\\\t',\n                \"\\n\": '\\\\n',\n                \"\\f\": '\\\\f',\n                \"\\r\": '\\\\r',\n                '\"' : '\\\\\"',\n                \"\\\\\": '\\\\\\\\'\n            };\n\n            function encodeString(source) {\n                if (/[\"\\\\\\x00-\\x1f]/.test(source)) {\n                    source = source.replace(\n                        /[\"\\\\\\x00-\\x1f]/g,\n                        function (match) {\n                            var c = escapeMap[match];\n                            if (c) {\n                                return c;\n                            }\n                            c = match.charCodeAt();\n                            return \"\\\\u00\"\n                            + Math.floor(c / 16).toString(16)\n                            + (c % 16).toString(16);\n                        });\n                }\n                return '\"' + source + '\"';\n            }\n\n            function encodeArray(source) {\n                var result = [\"[\"],\n                    l = source.length,\n                    preComma, i, item;\n\n                for (i = 0; i < l; i++) {\n                    item = source[i];\n\n                    switch (typeof item) {\n                        case \"undefined\":\n                        case \"function\":\n                        case \"unknown\":\n                            break;\n                        default:\n                            if(preComma) {\n                                result.push(',');\n                            }\n                            result.push(utils.json2str(item));\n                            preComma = 1;\n                    }\n                }\n                result.push(\"]\");\n                return result.join(\"\");\n            }\n\n            function pad(source) {\n                return source < 10 ? '0' + source : source;\n            }\n\n            function encodeDate(source){\n                return '\"' + source.getFullYear() + \"-\"\n                + pad(source.getMonth() + 1) + \"-\"\n                + pad(source.getDate()) + \"T\"\n                + pad(source.getHours()) + \":\"\n                + pad(source.getMinutes()) + \":\"\n                + pad(source.getSeconds()) + '\"';\n            }\n\n            return function (value) {\n                switch (typeof value) {\n                    case 'undefined':\n                        return 'undefined';\n\n                    case 'number':\n                        return isFinite(value) ? String(value) : \"null\";\n\n                    case 'string':\n                        return encodeString(value);\n\n                    case 'boolean':\n                        return String(value);\n\n                    default:\n                        if (value === null) {\n                            return 'null';\n                        } else if (utils.isArray(value)) {\n                            return encodeArray(value);\n                        } else if (utils.isDate(value)) {\n                            return encodeDate(value);\n                        } else {\n                            var result = ['{'],\n                                encode = utils.json2str,\n                                preComma,\n                                item;\n\n                            for (var key in value) {\n                                if (Object.prototype.hasOwnProperty.call(value, key)) {\n                                    item = value[key];\n                                    switch (typeof item) {\n                                        case 'undefined':\n                                        case 'unknown':\n                                        case 'function':\n                                            break;\n                                        default:\n                                            if (preComma) {\n                                                result.push(',');\n                                            }\n                                            preComma = 1;\n                                            result.push(encode(key) + ':' + encode(item));\n                                    }\n                                }\n                            }\n                            result.push('}');\n                            return result.join('');\n                        }\n                }\n            };\n        }\n\n    })()\n\n};\n/**\n * 判断给定的对象是否是字符串\n * @method isString\n * @param { * } object 需要判断的对象\n * @return { Boolean } 给定的对象是否是字符串\n */\n\n/**\n * 判断给定的对象是否是数组\n * @method isArray\n * @param { * } object 需要判断的对象\n * @return { Boolean } 给定的对象是否是数组\n */\n\n/**\n * 判断给定的对象是否是一个Function\n * @method isFunction\n * @param { * } object 需要判断的对象\n * @return { Boolean } 给定的对象是否是Function\n */\n\n/**\n * 判断给定的对象是否是Number\n * @method isNumber\n * @param { * } object 需要判断的对象\n * @return { Boolean } 给定的对象是否是Number\n */\n\n/**\n * 判断给定的对象是否是一个正则表达式\n * @method isRegExp\n * @param { * } object 需要判断的对象\n * @return { Boolean } 给定的对象是否是正则表达式\n */\n\n/**\n * 判断给定的对象是否是一个普通对象\n * @method isObject\n * @param { * } object 需要判断的对象\n * @return { Boolean } 给定的对象是否是普通对象\n */\nutils.each(['String', 'Function', 'Array', 'Number', 'RegExp', 'Object', 'Date'], function (v) {\n    UE.utils['is' + v] = function (obj) {\n        return Object.prototype.toString.apply(obj) == '[object ' + v + ']';\n    }\n});\n"]}